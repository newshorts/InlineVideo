"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),InlineVideo=function(){function e(t,i){var n=this,a=arguments.length<=2||void 0===arguments[2]?30:arguments[2];_classCallCheck(this,e),this._load_started=!1,this.video=document.querySelector(t),this.canvas=document.querySelector(i),this.video.parentNode.removeChild(this.video),this.framerate=a,window.addEventListener("touchstart",function(){return n._start_load()}),this._start_load(),window.requestAnimationFrame||(window.requestAnimationFrame=window.webkitRequestAnimationFrame,window.cancelRequestAnimationFrame=window.webkitCancelRequestAnimationFrame)}return _createClass(e,[{key:"play",value:function(){var e=this;this.last_frame_time=Date.now(),this.animation_request=requestAnimationFrame(function(t){return e.render_frame(t)})}},{key:"pause",value:function(){cancelAnimationFrame(this.animation_request)}},{key:"rewind",value:function(){this.video.currentTime=0,this.pause(),this.play()}},{key:"render_frame",value:function(){var e=this,t=Date.now(),i=(t-this.last_frame_time)/1e3;i>1/this.framerate&&(this.last_frame_time=t,this.video.currentTime+=i,this.canvas.getContext("2d").drawImage(this.video,0,0)),this.video.currentTime<this.video.duration&&(this.animation_request=requestAnimationFrame(function(t){return e.render_frame(t)}))}},{key:"_start_load",value:function(){this._load_started||(this.video.load(),this._load_started=!0)}}]),e}();