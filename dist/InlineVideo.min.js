"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),InlineVideo=function(){function e(t,n){var a=this,i=arguments.length<=2||void 0===arguments[2]?30:arguments[2];_classCallCheck(this,e),this.video=document.querySelector(t),this.canvas=document.querySelector(n),this.framerate=i,this.bound_start_load=function(){return a._start_load()},window.addEventListener("touchstart",this.bound_start_load),this._start_load(),window.requestAnimationFrame||(window.requestAnimationFrame=window.webkitRequestAnimationFrame,window.cancelRequestAnimationFrame=window.webkitCancelRequestAnimationFrame)}return _createClass(e,[{key:"play",value:function(){var e=this;this.last_frame_time=Date.now(),this.animation_request=requestAnimationFrame(function(t){return e.render_frame(t)})}},{key:"pause",value:function(){cancelAnimationFrame(this.animation_request)}},{key:"rewind",value:function(){this.video.currentTime=0,this.pause(),this.play()}},{key:"render_frame",value:function(){var e=this,t=Date.now(),n=(t-this.last_frame_time)/1e3;n>1/this.framerate&&(this.last_frame_time=t,this.video.currentTime+=n,this.canvas.getContext("2d").drawImage(this.video,0,0)),this.video.currentTime<this.video.duration&&(this.animation_request=requestAnimationFrame(function(t){return e.render_frame(t)}))}},{key:"_start_load",value:function(){console.log(this),this.video.load(),window.removeEventListener("touchstart",this.bound_start_load)}}]),e}();