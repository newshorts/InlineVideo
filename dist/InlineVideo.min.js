"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),InlineVideo=function(){function e(t,i){var n=arguments.length<=2||void 0===arguments[2]?null:arguments[2],a=arguments.length<=3||void 0===arguments[3]?null:arguments[3],r=arguments.length<=4||void 0===arguments[4]?null:arguments[4],s=arguments.length<=5||void 0===arguments[5]?25:arguments[5],o=arguments.length<=6||void 0===arguments[6]?!1:arguments[6];_classCallCheck(this,e),this.video=document.querySelector(t),this.canvas=document.querySelector(i),this.framerate=s,n&&(this.audio=document.querySelector(n)),this.ios=o||/iPad|iPhone|iPod/.test(navigator.platform),window.requestAnimationFrame||(window.requestAnimationFrame=window.webkitRequestAnimationFrame,window.cancelRequestAnimationFrame=window.webkitCancelRequestAnimationFrame),a&&(this.on_ended=a,this.video.addEventListener("ended",a)),r&&this.video.addEventListener("loadeddata",r)}return _createClass(e,[{key:"play",value:function(){var e=this;this.ios?(this.last_frame_time=Date.now(),this.animation_request=requestAnimationFrame(function(t){return e.render_frame(t)}),this.audio&&this.audio.play()):this.video.play()}},{key:"pause",value:function(){this.ios?(cancelAnimationFrame(this.animation_request),this.audio&&this.audio.pause()):this.video.pause()}},{key:"rewind",value:function(){this.ios?(this.video.currentTime=0,this.pause(),this.play(),this.audio&&(this.audio.currentTime=0,this.audio.play())):(this.video.currentTime=0,this.video.play())}},{key:"render_frame",value:function(){var e=this,t=Date.now(),i=(t-this.last_frame_time)/1e3;i>1/this.framerate&&(this.last_frame_time=t,this.video.currentTime+=i,this.canvas.getContext("2d").drawImage(this.video,0,0),console.log()),this.video.currentTime<this.video.duration?this.animation_request=requestAnimationFrame(function(t){return e.render_frame(t)}):this.on_ended&&this.on_ended()}}]),e}();